{"ast":null,"code":"var _jsxFileName = \"/Users/hoanganh0722/Desktop/Web/gstorevn/src/components/Pages/Signin.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport styles from \"../scss/Form.module.scss\";\nimport Input from \"../../UI/Input\";\nimport Layout from \"../../layout/Layout/Layout\";\nimport { Button } from \"@material-ui/core\";\nimport useInput from \"../hook/use-input\";\nimport { useHistory } from \"react-router-dom\";\nimport Loading from \"../Loading/Loading\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { signInActions } from \"../redux-store/Store\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Signin = () => {\n  _s();\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [isLocked, setIsLocked] = useState(false);\n  const [isValidSignIn, setIsValidSignIn] = useState(true);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const isSignedIn = useSelector(state => state.signin.isSignedIn);\n  console.log(isSignedIn);\n  const {\n    isValid: emailIsValid,\n    isTouched: emailInputIsTouched,\n    valueInput: valueEmailInput,\n    inputIsTouchedHandler: inputEmailIsTouched,\n    changeInputHandler: changeEmailHandler,\n    resetInputHandler: resetEmailHandler\n  } = useInput(value => value.trim().length > 0 && value.includes(\"@\"));\n  const {\n    isValid: passwordIsValid,\n    isTouched: passwordIsTouched,\n    valueInput: passwordValue,\n    inputIsTouchedHandler: passwordIsTouchedHandler,\n    changeInputHandler: changePasswordHandler,\n    resetInputHandler: resetPasswordHandler\n  } = useInput(value => value.trim().length >= 8);\n\n  const submitHandler = event => {\n    event.preventDefault();\n    console.log(passwordValue);\n    setIsLoading(true);\n    resetEmailHandler();\n    resetPasswordHandler();\n    fetch(\"http://localhost:3001/login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: valueEmailInput,\n        password: passwordValue\n      })\n    }).then(response => response.json()).then(data => {\n      setIsLoading(false);\n\n      if (!data.id) {\n        setIsValidSignIn(false);\n      } else if (data.islocked) {\n        setIsLocked(true);\n      } else {\n        dispatch(signInActions.SignIn());\n        localStorage.setItem(\"isSignedIn\", 1);\n        history.push(\"/admin\");\n      }\n    }).catch(err => console.log(err));\n  };\n\n  let formIsValid = emailIsValid && passwordIsValid;\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: submitHandler,\n    className: styles.form,\n    children: /*#__PURE__*/_jsxDEV(Layout, {\n      className: styles.layout,\n      children: isSignedIn ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.notification,\n          children: \"B\\u1EA1n \\u0111\\xE3 \\u0111\\u0103ng nh\\u1EADp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)\n      }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          input: {\n            value: valueEmailInput,\n            type: \"email\",\n            id: \"email\",\n            label: \"Email\",\n            placeholder: \"Email...\",\n            onChange: changeEmailHandler,\n            onBlur: inputEmailIsTouched\n          },\n          className: !emailIsValid && emailInputIsTouched && \"invalid\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this), !emailIsValid && emailInputIsTouched && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.invalid,\n          children: \"Email kh\\xF4ng h\\u1EE3p l\\u1EC7!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          input: {\n            value: passwordValue,\n            type: \"password\",\n            id: \"password\",\n            label: \"Password\",\n            placeholder: \"Password...\",\n            onChange: changePasswordHandler,\n            onBlur: passwordIsTouchedHandler\n          },\n          className: !passwordIsValid && passwordIsTouched && \"invalid\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), !passwordIsValid && passwordIsTouched && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.invalid,\n          children: \"Password ph\\u1EA3i tr\\xEAn 8 k\\xFD t\\u1EF1!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${styles.submit} ${!formIsValid && styles[\"submit-invalid\"]}`,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            disabled: !formIsValid,\n            variant: \"contained\",\n            type: \"submit\",\n            children: \"\\u0110\\u0103ng nh\\u1EADp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this), isLocked && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles[\"invalid-signIn\"],\n          children: \"T\\xE0i kho\\u1EA3n c\\u1EE7a b\\u1EA1n \\u0111\\xE3 b\\u1ECB kh\\xF3a!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 15\n        }, this), !isValidSignIn && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles[\"invalid-signIn\"],\n          children: \"T\\xE0i kho\\u1EA3n ho\\u1EB7c m\\u1EADt kh\\u1EA9u kh\\xF4ng ch\\xEDnh x\\xE1c!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 15\n        }, this), isLoading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Signin, \"7Hhtw54i7UGwPZ2qd9iObcNGgVI=\", false, function () {\n  return [useHistory, useDispatch, useSelector, useInput, useInput];\n});\n\n_c = Signin;\nexport default Signin;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signin\");","map":{"version":3,"sources":["/Users/hoanganh0722/Desktop/Web/gstorevn/src/components/Pages/Signin.js"],"names":["React","useState","styles","Input","Layout","Button","useInput","useHistory","Loading","useDispatch","useSelector","signInActions","Signin","isLoading","setIsLoading","isLocked","setIsLocked","isValidSignIn","setIsValidSignIn","history","dispatch","isSignedIn","state","signin","console","log","isValid","emailIsValid","isTouched","emailInputIsTouched","valueInput","valueEmailInput","inputIsTouchedHandler","inputEmailIsTouched","changeInputHandler","changeEmailHandler","resetInputHandler","resetEmailHandler","value","trim","length","includes","passwordIsValid","passwordIsTouched","passwordValue","passwordIsTouchedHandler","changePasswordHandler","resetPasswordHandler","submitHandler","event","preventDefault","fetch","method","headers","body","JSON","stringify","email","password","then","response","json","data","id","islocked","SignIn","localStorage","setItem","push","catch","err","formIsValid","form","layout","notification","type","label","placeholder","onChange","onBlur","invalid","submit"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport styles from \"../scss/Form.module.scss\";\nimport Input from \"../../UI/Input\";\nimport Layout from \"../../layout/Layout/Layout\";\nimport { Button } from \"@material-ui/core\";\nimport useInput from \"../hook/use-input\";\nimport { useHistory } from \"react-router-dom\";\nimport Loading from \"../Loading/Loading\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { signInActions } from \"../redux-store/Store\";\nconst Signin = () => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [isLocked, setIsLocked] = useState(false);\n  const [isValidSignIn, setIsValidSignIn] = useState(true);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const isSignedIn = useSelector((state) => state.signin.isSignedIn);\n  console.log(isSignedIn);\n  const {\n    isValid: emailIsValid,\n    isTouched: emailInputIsTouched,\n    valueInput: valueEmailInput,\n    inputIsTouchedHandler: inputEmailIsTouched,\n    changeInputHandler: changeEmailHandler,\n    resetInputHandler: resetEmailHandler,\n  } = useInput((value) => value.trim().length > 0 && value.includes(\"@\"));\n\n  const {\n    isValid: passwordIsValid,\n    isTouched: passwordIsTouched,\n    valueInput: passwordValue,\n    inputIsTouchedHandler: passwordIsTouchedHandler,\n    changeInputHandler: changePasswordHandler,\n    resetInputHandler: resetPasswordHandler,\n  } = useInput((value) => value.trim().length >= 8);\n  const submitHandler = (event) => {\n    event.preventDefault();\n    console.log(passwordValue);\n    setIsLoading(true);\n    resetEmailHandler();\n    resetPasswordHandler();\n    fetch(\"http://localhost:3001/login\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        email: valueEmailInput,\n        password: passwordValue,\n      }),\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        setIsLoading(false);\n        if (!data.id) {\n          setIsValidSignIn(false);\n        } else if (data.islocked) {\n          setIsLocked(true);\n        } else {\n          dispatch(signInActions.SignIn());\n          localStorage.setItem(\"isSignedIn\", 1);\n          history.push(\"/admin\");\n        }\n      })\n      .catch((err) => console.log(err));\n  };\n  let formIsValid = emailIsValid && passwordIsValid;\n  return (\n    <form onSubmit={submitHandler} className={styles.form}>\n      <Layout className={styles.layout}>\n        {isSignedIn ? (\n          <>\n            <p className={styles.notification}>Bạn đã đăng nhập</p>\n\n          </>\n        ) : (\n          <>\n            <Input\n              input={{\n                value: valueEmailInput,\n                type: \"email\",\n                id: \"email\",\n                label: \"Email\",\n                placeholder: \"Email...\",\n                onChange: changeEmailHandler,\n                onBlur: inputEmailIsTouched,\n              }}\n              className={!emailIsValid && emailInputIsTouched && \"invalid\"}\n            />\n            {!emailIsValid && emailInputIsTouched && (\n              <p className={styles.invalid}>Email không hợp lệ!</p>\n            )}\n            <Input\n              input={{\n                value: passwordValue,\n                type: \"password\",\n                id: \"password\",\n                label: \"Password\",\n                placeholder: \"Password...\",\n                onChange: changePasswordHandler,\n                onBlur: passwordIsTouchedHandler,\n              }}\n              className={!passwordIsValid && passwordIsTouched && \"invalid\"}\n            />\n            {!passwordIsValid && passwordIsTouched && (\n              <p className={styles.invalid}>Password phải trên 8 ký tự!</p>\n            )}\n            <div\n              className={`${styles.submit} ${\n                !formIsValid && styles[\"submit-invalid\"]\n              }`}\n            >\n              <Button\n                disabled={!formIsValid}\n                variant=\"contained\"\n                type={\"submit\"}\n              >\n                Đăng nhập\n              </Button>\n            </div>\n            {isLocked && (\n              <p className={styles[\"invalid-signIn\"]}>\n                Tài khoản của bạn đã bị khóa!\n              </p>\n            )}\n            {!isValidSignIn && (\n              <p className={styles[\"invalid-signIn\"]}>\n                Tài khoản hoặc mật khẩu không chính xác!\n              </p>\n            )}\n            {isLoading && <Loading />}\n          </>\n        )}\n      </Layout>\n    </form>\n  );\n};\n\nexport default Signin;\n"]},"metadata":{},"sourceType":"module"}